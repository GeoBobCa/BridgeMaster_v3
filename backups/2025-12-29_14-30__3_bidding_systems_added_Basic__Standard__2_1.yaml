# ======================================================================
# BRIDGE MASTER BIDDING TREE
#
# Supported Systems:
#   - "Grant_Basic":    Fundamental Modern Standard (No Transfers/Splinters)
#   - "Grant_Standard": Tournament Standard (Transfers, J2NT, Splinters)
#   - "2/1_GF":         2/1 Game Forcing (Advanced)
#
# Usage:
#   ["All"] = Applies to all three systems.
#   ["Grant_Standard", "2/1_GF"] = Applies to Standard and 2/1, but NOT Basic.
# ======================================================================

Dealer:
  # === 1. PASS ===
  - bid: "Pass"
    type: "Opening"
    systems: ["All"]
    convention: "Natural"
    constraints:
      max_hcp: 11
      explanation: "Too weak to open (0-11 HCP)."

  # === 2. STRONG 2C ===
  - bid: "2C"
    type: "Opening"
    systems: ["All"]
    convention: "Strong Artificial"
    forcing_status: "Forcing"
    constraints:
      min_hcp: 22
      explanation: "Strongest opening bid (22+ HCP)."
    
    Responder:
      - bid: "2D"
        type: "Response"
        systems: ["All"]
        convention: "Waiting"
        forcing_status: "Forcing"
        constraints:
          max_hcp: 7
          explanation: "Artificial waiting bid or negative."
      
      # GRANT STANDARD adds "Second Negative" logic here later (3C)
      # For now, we keep the positive responses common to all.
      - bid: "2H"
        type: "Response"
        systems: ["All"]
        convention: "Positive"
        forcing_status: "Game Forcing"
        constraints:
          min_hcp: 8
          shape_requirements: "5+ Hearts"

  # === 3. 1NT OPENING ===
  - bid: "1NT"
    type: "Opening"
    systems: ["All"]
    convention: "Natural"
    constraints:
      min_hcp: 15
      max_hcp: 17
      shape_requirements: "Balanced"
      explanation: "15-17 HCP, Balanced hand."

    # RESPONSES TO 1NT
    Responder:
      # --- STAYMAN (Common to All) ---
      - bid: "2C"
        type: "Response"
        systems: ["All"]
        convention: "Stayman"
        forcing_status: "Forcing"
        constraints:
          min_hcp: 8
          shape_requirements: "4+ Major (Ask)"
          explanation: "Stayman asking for 4-card Major."

      # --- GRANT BASIC (Natural Weak Responses) ---
      - bid: "2D"
        type: "Response"
        systems: ["Grant_Basic"]
        convention: "Natural"
        forcing_status: "Non-Forcing"
        constraints:
          max_hcp: 7
          shape_requirements: "5+ Diamonds"
          explanation: "Weak sign-off in Diamonds."

      - bid: "2H"
        type: "Response"
        systems: ["Grant_Basic"]
        convention: "Natural"
        forcing_status: "Non-Forcing"
        constraints:
          max_hcp: 7
          shape_requirements: "5+ Hearts"
          explanation: "Weak sign-off in Hearts."
      
      - bid: "2S"
        type: "Response"
        systems: ["Grant_Basic"]
        convention: "Natural"
        forcing_status: "Non-Forcing"
        constraints:
          max_hcp: 7
          shape_requirements: "5+ Spades"
          explanation: "Weak sign-off in Spades."

      # --- GRANT STANDARD / 2/1 (Jacoby Transfers) ---
      - bid: "2D"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Jacoby Transfer"
        forcing_status: "Forcing"
        constraints:
          shape_requirements: "5+ Hearts"
          explanation: "Transfer to Hearts."

      - bid: "2H"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Jacoby Transfer"
        forcing_status: "Forcing"
        constraints:
          shape_requirements: "5+ Spades"
          explanation: "Transfer to Spades."

      - bid: "2S"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Transfer to Minor"
        forcing_status: "Forcing"
        constraints:
          shape_requirements: "6+ Clubs/Diamonds"
          explanation: "Transfer to 3C (Sign off in minor)."

      # --- COMMON NT RAISES ---
      - bid: "2NT"
        type: "Response"
        systems: ["All"]
        convention: "Invitation"
        constraints:
          min_hcp: 8
          max_hcp: 9
          explanation: "Invitational to 3NT."

      - bid: "3NT"
        type: "Response"
        systems: ["All"]
        convention: "Sign-off"
        constraints:
          min_hcp: 10
          max_hcp: 15
          explanation: "To Play."

  # === 4. 1 SPADE OPENING ===
  - bid: "1S"
    type: "Opening"
    systems: ["All"]
    convention: "Natural"
    constraints:
      min_hcp: 12
      max_hcp: 21
      shape_requirements: "5+ Spades"

    # RESPONSES TO 1S
    Responder:
      - bid: "Pass"
        type: "Response"
        systems: ["All"]
        constraints:
          max_hcp: 5
          explanation: "Too weak to respond."

      - bid: "2S"
        type: "Response"
        systems: ["All"]
        convention: "Simple Raise"
        constraints:
          min_hcp: 6
          max_hcp: 9
          shape_requirements: "3+ Spades"

      # --- 1NT RESPONSE ---
      - bid: "1NT"
        type: "Response"
        systems: ["Grant_Basic", "Grant_Standard"]
        convention: "Natural / Semi-Forcing"
        forcing_status: "Semi-Forcing"
        constraints:
          min_hcp: 6
          max_hcp: 9
          explanation: "6-9 HCP. Denies support."
      
      - bid: "1NT"
        type: "Response"
        systems: ["2/1_GF"]
        convention: "Forcing 1NT"
        forcing_status: "Forcing"
        constraints:
          min_hcp: 6
          max_hcp: 12
          explanation: "6-12 HCP. Forcing for one round."

      # --- 2-LEVEL NEW SUITS ---
      - bid: "2C"
        type: "Response"
        systems: ["Grant_Basic", "Grant_Standard"]
        convention: "New Suit"
        forcing_status: "Forcing"
        constraints:
          min_hcp: 10
          shape_requirements: "5+ Clubs"

      - bid: "2C"
        type: "Response"
        systems: ["2/1_GF"]
        convention: "2/1 Game Force"
        forcing_status: "Game Forcing"
        constraints:
          min_hcp: 13
          shape_requirements: "3+ Clubs" # 2/1 often allows 3+ here

      # --- SPECIAL RAISES: BASIC VS STANDARD ---
      # Grant Basic: 2NT is just a natural limit raise (balanced)
      - bid: "2NT"
        type: "Response"
        systems: ["Grant_Basic"]
        convention: "Natural Invitation"
        constraints:
          min_hcp: 10
          max_hcp: 12
          shape_requirements: "Balanced"
          explanation: "Balanced invitation (10-12)."

      # Grant Standard: 2NT is Jacoby (Game Forcing support)
      - bid: "2NT"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Jacoby 2NT"
        forcing_status: "Game Forcing"
        constraints:
          min_dummy_points: 13
          shape_requirements: "4+ Spades"
          explanation: "Jacoby 2NT: 13+ points, 4+ card support."

      - bid: "3S"
        type: "Response"
        systems: ["All"]
        convention: "Limit Raise"
        constraints:
          min_dummy_points: 10
          max_dummy_points: 12
          shape_requirements: "3+ Spades"

      - bid: "4S"
        type: "Response"
        systems: ["All"]
        convention: "Game Raise"
        constraints:
          min_dummy_points: 13
          shape_requirements: "4+ Spades"
          explanation: "Sign off in game."

      # --- SPLINTERS (Grant Standard Only) ---
      - bid: "4C"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Splinter"
        forcing_status: "Game Forcing"
        constraints:
          min_dummy_points: 13
          shape_requirements: "4+ Spades, Max 1 Club"
          explanation: "Splinter: Game Force, Support, Shortness in Clubs."
      
      - bid: "4D"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Splinter"
        forcing_status: "Game Forcing"
        constraints:
          min_dummy_points: 13
          shape_requirements: "4+ Spades, Max 1 Diamond"
          explanation: "Splinter: Game Force, Support, Shortness in Diamonds."

      - bid: "4H"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Splinter"
        forcing_status: "Game Forcing"
        constraints:
          min_dummy_points: 13
          shape_requirements: "4+ Spades, Max 1 Heart"
          explanation: "Splinter: Game Force, Support, Shortness in Hearts."

  # === 5. 1 HEART OPENING ===
  - bid: "1H"
    type: "Opening"
    systems: ["All"]
    convention: "Natural"
    constraints:
      min_hcp: 12
      max_hcp: 21
      shape_requirements: "5+ Hearts"

    # RESPONSES TO 1H
    Responder:
      - bid: "Pass"
        type: "Response"
        systems: ["All"]
        constraints:
          max_hcp: 5

      - bid: "2H"
        type: "Response"
        systems: ["All"]
        convention: "Simple Raise"
        constraints:
          min_hcp: 6
          max_hcp: 9
          shape_requirements: "3+ Hearts"

      - bid: "1S"
        type: "Response"
        systems: ["All"]
        convention: "New Suit"
        forcing_status: "Forcing"
        constraints:
          min_hcp: 6
          shape_requirements: "4+ Spades"

      - bid: "1NT"
        type: "Response"
        systems: ["Grant_Basic", "Grant_Standard"]
        convention: "Natural / Semi-Forcing"
        constraints:
          min_hcp: 6
          max_hcp: 9
      
      - bid: "1NT"
        type: "Response"
        systems: ["2/1_GF"]
        convention: "Forcing 1NT"
        constraints:
          min_hcp: 6
          max_hcp: 12

      # --- 2-LEVEL NEW SUITS ---
      - bid: "2C"
        type: "Response"
        systems: ["Grant_Basic", "Grant_Standard"]
        constraints:
          min_hcp: 10
          shape_requirements: "4+ Clubs"

      - bid: "2C"
        type: "Response"
        systems: ["2/1_GF"]
        convention: "2/1 Game Force"
        constraints:
          min_hcp: 13
          shape_requirements: "3+ Clubs"

      # --- RAISES: BASIC VS STANDARD ---
      - bid: "2NT"
        type: "Response"
        systems: ["Grant_Basic"]
        convention: "Natural Invitation"
        constraints:
          min_hcp: 10
          max_hcp: 12
          shape_requirements: "Balanced"

      - bid: "2NT"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Jacoby 2NT"
        forcing_status: "Game Forcing"
        constraints:
          min_dummy_points: 13
          shape_requirements: "4+ Hearts"

      # --- SPLINTERS (Grant Standard Only) ---
      - bid: "3S"
        type: "Response"
        systems: ["Grant_Standard", "2/1_GF"]
        convention: "Splinter"
        forcing_status: "Game Forcing"
        constraints:
          min_dummy_points: 13
          shape_requirements: "4+ Hearts, Max 1 Spade"
          explanation: "Splinter: Game Force, Support, Shortness in Spades."

  # === 6. MINOR OPENINGS ===
  - bid: "1D"
    type: "Opening"
    systems: ["All"]
    convention: "Better Minor"
    constraints:
      min_hcp: 12
      max_hcp: 21
      shape_requirements: "4+ Diamonds"

    Responder:
      - bid: "1H"
        type: "Response"
        systems: ["All"]
        constraints:
          min_hcp: 6
          shape_requirements: "4+ Hearts"
      
      - bid: "1S"
        type: "Response"
        systems: ["All"]
        constraints:
          min_hcp: 6
          shape_requirements: "4+ Spades"

      - bid: "1NT"
        type: "Response"
        systems: ["All"]
        constraints:
          min_hcp: 6
          max_hcp: 10
          explanation: "6-10 HCP, No major."

      - bid: "2C"
        type: "Response"
        systems: ["Grant_Basic", "Grant_Standard"]
        constraints:
          min_hcp: 10
          shape_requirements: "4+ Clubs"

      - bid: "2D"
        type: "Response"
        systems: ["All"]
        convention: "Simple Raise"
        constraints:
          min_hcp: 6
          max_hcp: 9
          shape_requirements: "4+ Diamonds"

  - bid: "1C"
    type: "Opening"
    systems: ["All"]
    convention: "Better Minor"
    constraints:
      min_hcp: 12
      max_hcp: 21
      shape_requirements: "3+ Clubs"

    Responder:
      - bid: "1D"
        type: "Response"
        systems: ["All"]
        constraints:
          min_hcp: 6
          shape_requirements: "4+ Diamonds"

      - bid: "1H"
        type: "Response"
        systems: ["All"]
        constraints:
          min_hcp: 6
          shape_requirements: "4+ Hearts"

      - bid: "1S"
        type: "Response"
        systems: ["All"]
        constraints:
          min_hcp: 6
          shape_requirements: "4+ Spades"

      - bid: "1NT"
        type: "Response"
        systems: ["All"]
        constraints:
          min_hcp: 6
          max_hcp: 10